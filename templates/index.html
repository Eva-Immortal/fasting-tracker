<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>30-Day Fasting Tracker</title>
</head>
<body>

    <h1>30-Day Fasting Tracker</h1>

    <form method="POST">
        <label>Date:</label><br>
        <input type="date" name="date" required><br><br>

        <label>Food Intake:</label><br>
        <textarea name="food_intake" rows="3"></textarea><br><br>

        <label>Activity Level (1–10):</label><br>
        <input type="number" name="activity" min="1" max="10" required><br><br>

        <label>Morning Weight (kg):</label><br>
        <input type="number" step="0.1" name="weight" required><br><br>

        <!-- ✅ Blood Pressure Inputs -->
        <label>Systolic (e.g. 120):</label><br>
        <input type="number" name="systolic" required><br><br>

        <label>Diastolic (e.g. 80):</label><br>
        <input type="number" name="diastolic" required><br><br>

        <button type="submit">Save Day</button>
    </form>

    <hr>

    <h2>Daily Logs</h2>

    {% if logs %}
        <table border="1" cellpadding="5">
            <tr>
                <th>Date</th>
                <th>Food</th>
                <th>Activity</th>
                <th>Weight (kg)</th>
                <th>BMI</th>
                <th>Blood Pressure</th>
            </tr>

            {% for log in logs %}
            <tr>
                <td>{{ log["date"] }}</td>
                <td>{{ log["food_intake"] }}</td>
                <td>{{ log["activity_level"] }}</td>
                <td>{{ log["weight"] }}</td>
                <td>{{ log["bmi"] }}</td>
                <td>{{ log["systolic"] }}/{{ log["diastolic"] }}</td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No entries yet.</p>
    {% endif %}

    <hr>

    <h2>Progress Charts</h2>

    <canvas id="weightChart" width="400" height="200"></canvas>
    <br><br>
    <canvas id="bmiChart" width="400" height="200"></canvas>
    <br><br>
    <canvas id="bpChart" width="400" height="200"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- ✅ Data passed from Flask -->
    <script>
        const dates = {{ dates | tojson }};
        const weights = {{ weights | tojson }};
        const bmis = {{ bmis | tojson }};
        const systolics = {{ systolics | tojson }};
        const diastolics = {{ diastolics | tojson }};
    </script>

    <script src="{{ url_for('static', filename='js/chart.js') }}"></script>

</body>
</html>